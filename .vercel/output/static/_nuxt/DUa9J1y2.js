import{r as i,l as S,D as c}from"./D_68Zcu-.js";const j=()=>{const s=i([]),n=i(!1),o=i(""),d=[{id:1,nome:"Segunda-feira",abrev:"Seg"},{id:2,nome:"Ter√ßa-feira",abrev:"Ter"},{id:3,nome:"Quarta-feira",abrev:"Qua"},{id:4,nome:"Quinta-feira",abrev:"Qui"},{id:5,nome:"Sexta-feira",abrev:"Sex"},{id:6,nome:"S√°bado",abrev:"S√°b"},{id:7,nome:"Domingo",abrev:"Dom"}],u=async()=>{console.log("üì° [useJornadas] Carregando jornadas..."),n.value=!0,o.value="";try{const a=await $fetch("/api/jornadas");return console.log("‚úÖ [useJornadas] Resposta recebida:",a),a.success&&a.data?(s.value=a.data,console.log("‚úÖ [useJornadas] Jornadas carregadas:",s.value.length),{success:!0,message:"Jornadas carregadas com sucesso!"}):(console.log("‚ö†Ô∏è [useJornadas] Resposta sem sucesso"),{success:!1,message:"Erro ao carregar jornadas"})}catch(a){return o.value=a.data?.message||"Erro ao carregar jornadas",console.error("‚ùå [useJornadas] Erro ao carregar jornadas:",a),s.value=[{id:"1",nome:"Jornada 42h45min",descricao:"Jornada personalizada: Segunda a quinta 8h45min, sexta 7h45min",horas_semanais:42.75,horas_mensais:185.25,ativa:!0,padrao:!0,created_at:"2026-01-13T10:00:00Z",updated_at:"2026-01-13T10:00:00Z",horarios:[]}],console.log("üîß [useJornadas] Usando dados de fallback"),{success:!1,message:o.value}}finally{n.value=!1}},l=async a=>{n.value=!0;try{const e=await $fetch("/api/jornadas",{method:"POST",body:a});return e.success?(await u(),{success:!0,message:e.message||"Jornada salva com sucesso!"}):{success:!1,message:"Erro ao salvar jornada"}}catch(e){return console.error("Erro ao salvar jornada:",e),{success:!1,message:e.data?.message||"Erro ao salvar jornada"}}finally{n.value=!1}},m=a=>s.value.find(e=>e.id===a),v=()=>s.value.find(a=>a.padrao&&a.ativa),f=S(()=>s.value.filter(a=>a.ativa).map(a=>({value:a.id,label:`${a.nome} (${a.horas_semanais}h semanais)`}))),g=a=>!a||a==="00:00"?"--":a.substring(0,5),b=a=>{if(a===0)return"0h";const e=Math.floor(a),r=Math.round((a-e)*60);return r===0?`${e}h`:`${e}h${r.toString().padStart(2,"0")}min`},p=a=>a.filter(e=>e.trabalha).reduce((e,r)=>e+r.horas_liquidas,0),J=a=>a*4.33,t=a=>{const e=d.find(r=>r.id===a);return e?e.nome:"Desconhecido"},_=a=>{const e=d.find(r=>r.id===a);return e?e.abrev:"?"},h=a=>{const e=[];return a.forEach(r=>{r.trabalha&&(r.entrada>=r.saida&&e.push(`${t(r.dia_semana)}: Hor√°rio de entrada deve ser anterior ao de sa√≠da`),r.intervalo_inicio&&r.intervalo_fim&&(r.intervalo_inicio>=r.intervalo_fim&&e.push(`${t(r.dia_semana)}: In√≠cio do intervalo deve ser anterior ao fim`),(r.intervalo_inicio<=r.entrada||r.intervalo_fim>=r.saida)&&e.push(`${t(r.dia_semana)}: Intervalo deve estar dentro do hor√°rio de trabalho`)))}),{valida:e.length===0,erros:e}};return{jornadas:c(s),loading:c(n),error:c(o),diasSemana:d,opcoesJornadas:f,carregarJornadas:u,salvarJornada:l,obterJornada:m,obterJornadaPadrao:v,formatarHorario:g,formatarHorasDecimais:b,calcularHorasSemanais:p,calcularHorasMensais:J,obterNomeDia:t,obterAbrevDia:_,validarJornada:h}};export{j as u};
